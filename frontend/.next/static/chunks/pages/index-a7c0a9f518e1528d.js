(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2350)}])},2350:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var s=n(5893),a=n(7294),r=n(9071),i=n(2871),o=n(5960),d=n(3599);function c(e){let{tasks:t,onComplete:n,completedIds:c}=e,l=(0,a.useMemo)(()=>new Set(c||[]),[c]),{nodes:u,edges:p}=function(e,t){let n=e.map((e,n)=>{let s="blocked"===e.status,a=t.has(e.id),r=(e.dependencies||[]).every(e=>t.has(e));return{id:e.id,data:{label:"".concat(e.id,": ").concat(e.description)},position:{x:n%5*220,y:120*Math.floor(n/5)},style:{padding:8,backgroundColor:a?"#22c55e":s?"#ef4444":r?"#6ee7b7":"#e5e7eb",borderRadius:8}}}),s=[];return e.forEach(e=>{(e.dependencies||[]).forEach(t=>{s.push({id:"".concat(t,"-").concat(e.id),source:t,target:e.id})})}),{nodes:n,edges:s}}(t||[],l);return(0,s.jsx)("div",{style:{height:420,border:"1px solid #e5e7eb",borderRadius:8},children:(0,s.jsxs)(r.x$,{nodes:u,edges:p,onNodeClick:(e,t)=>n(t.id),children:[(0,s.jsx)(i.a,{}),(0,s.jsx)(o.Z,{}),(0,s.jsx)(d.A,{})]})})}function l(){let[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[d,l]=(0,a.useState)([]),[u,p]=(0,a.useState)(new Set);async function h(){let t=await fetch("/api/proxy/transcripts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e})}),n=await t.json();r(n.jobId),o(n.transcriptId),f(n.jobId,n.transcriptId)}async function f(e,t){let n=setInterval(async()=>{let s=await fetch("/api/proxy/jobs/".concat(e)),a=await s.json();if("completed"===a.status){var r;if(clearInterval(n),null===(r=a.result)||void 0===r?void 0:r.tasks)l(a.result.tasks);else if(t){let e=await fetch("/api/proxy/transcripts/".concat(t)),n=await e.json();l(n.tasks||[])}}},1e3)}return(0,s.jsxs)("div",{style:{padding:24},children:[(0,s.jsx)("h1",{children:"InsightBoard â€” Dependency Viewer"}),(0,s.jsx)("textarea",{rows:8,style:{width:"100%"},value:e,onChange:e=>t(e.target.value),placeholder:"Paste meeting transcript here..."}),(0,s.jsx)("div",{style:{marginTop:12},children:(0,s.jsx)("button",{onClick:h,children:"Submit Transcript"})}),(0,s.jsxs)("div",{style:{marginTop:24},children:[(0,s.jsx)("h2",{style:{fontSize:"1.125rem",fontWeight:600},children:"Task Graph"}),(0,s.jsx)(c,{tasks:d,completedIds:Array.from(u),onComplete:e=>{p(t=>new Set(t).add(e)),l(t=>t.map(t=>{if(t.id===e)return{...t,status:"ready"};let n=t.dependencies||[],s=n.every(t=>Array.from(u).concat([e]).includes(t));return s&&"ready"!==t.status?{...t,status:"ready"}:t}))}})]})]})}n(1367)}},function(e){e.O(0,[651,493,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);